---
title: "hugo build"
date: 2022-06-28T19:13:20+08:00
draft: false 
---
# 前言

本片博客以配置文件的编辑为主，针对于有一定编程基础并且想个性化个人搭建博客的开发者。

本篇博客使用**hugo**作为搭建博客的工具，部署到Github上

实际上，搭建个人博客的过程并不轻松(如果想搞清楚流程)，并没有网上的三五分钟就轻松入门那么简单。

我会在本篇博客详细的记录我的博客搭建过程

## Hugo安装

# 特殊声明

在推送到Github Pages的过程需要时间，几秒到几分钟不止。

# 配置文件

一般来说，配置文件分为两种：

- toml：<变量名> = 值
- yaml：<变量名>：值

仅在内容的编辑上存在差异，没有优劣之分(以我目前的知识储备来看)。

我使用的是toml的编辑格式，下后面的内容中会依照[官方文档](https://gohugo.io/getting-started/configuration/)对一些配置进行说明。

**我的hugo根目录为：D:\HugoDir\byungogo**

-----

## 初始配置

![image-20220624173351570](../../../../Typora%25E5%259B%25BE%25E7%2589%2587%25E4%25B8%258B%25E8%25BD%25BD%25E5%259C%25B0/image-20220624173351570.png)

----

为什么不选择网上经常提到的**将主题下的配置文件直接覆盖**的原因比较简单，就是想自己从零开始设计一个**完全在自己掌控**内的个性化博客。

## day1

![](../../../../Typora%25E5%259B%25BE%25E7%2589%2587%25E4%25B8%258B%25E8%25BD%25BD%25E5%259C%25B0/image-20220624174413493.png)

添加了两个变量，其中theme是每个人最先接触的变量，用来设计主题，所以值也只需要与主题名相同即可。

- theme：选择主题

- publishDir : 与挂载Github有关系。

介绍publishDir之前，先来聊一聊在Github上挂载静态博客

在将项目全部挂载到Github上之前，都会有一组操作

首先在编辑完配置文件后，`hugo`一下，然后将web内容全部推到Github上。

```
#终端，创建的hugo site的根目录下
git init
git add 
git commit -m 'xxxxx'
git remote add origin https://xxxxxxxx # 在github上创建的仓库，仅第一次添加仓库时需要输入
git push -u origin master
```

整个web的信息在**public**下会生成

![image-20220624175221985](../../../../Typora%25E5%259B%25BE%25E7%2589%2587%25E4%25B8%258B%25E8%25BD%25BD%25E5%259C%25B0/image-20220624175221985.png)

这个过程在hugo的文档中是这么描述的![image-20220624175718262](../../../../Typora%25E5%259B%25BE%25E7%2589%2587%25E4%25B8%258B%25E8%25BD%25BD%25E5%259C%25B0/image-20220624175718262.png)

在默认状态下，会推送publish文件夹下的所有内容作为挂载Github的配置文件。而我在挂载时，发现默认的方法并不能永远挂载，换句话说，我们推送上去的内容，被视为了普通的代码。原因发生在Github Pages的设置上：

在Github上找到Your repositories，然后<img src="../../../../Typora%25E5%259B%25BE%25E7%2589%2587%25E4%25B8%258B%25E8%25BD%25BD%25E5%259C%25B0/image-20220624181830540.png" alt="image-20220624181830540" style="zoom: 50%;" />

点击Pages后，有一个source的设置。

![](../../../../Typora%25E5%259B%25BE%25E7%2589%2587%25E4%25B8%258B%25E8%25BD%25BD%25E5%259C%25B0/image-20220624182245029.png)

在第一次push后，会生成这样类似的路径，可以看到此时的Github Pages是从master下寻找文件然后挂载我们的博客的。

master的目录

<img src="../../../../Typora%25E5%259B%25BE%25E7%2589%2587%25E4%25B8%258B%25E8%25BD%25BD%25E5%259C%25B0/image-20220624182328882.png" alt="image-20220624182328882" style="zoom:50%;" />

遇到了第一个404，很显然，我们没挂载成功

<img src="../../../../Typora%25E5%259B%25BE%25E7%2589%2587%25E4%25B8%258B%25E8%25BD%25BD%25E5%259C%25B0/image-20220624182918590.png" alt="image-20220624182918590" style="zoom:50%;" />

这需要我们在推送site到Github上时发现问题。

``` 
#终端，创建的hugo site的根目录下
git init
git add 
git commit -m 'xxxxx'
git remote add origin https://xxxxxxxx # 在github上创建的仓库，仅第一次添加仓库时需要输入
git push -u origin master
```

这段命令的环境在hugo site的根目录下(即D:\HugoDir\byungogo)，而public是byungogo的子目录，自然就没挂载成功。

### Plan A

那么解决404的方法自然就有了---将public单独推送到Github上，然后再将整个根目录下的文件推送给Github.

初次之外，我们还有**Plan B**

### Plan B

设置Github Pages的source，以及配置文件。

![image-20220624183757006](../../../../Typora%25E5%259B%25BE%25E7%2589%2587%25E4%25B8%258B%25E8%25BD%25BD%25E5%259C%25B0/image-20220624183757006.png)

在source的第二个选项中，是可以选择不同的路径的，意思就是从哪个路径下提取构成web的文件。

<img src="../../../../Typora%25E5%259B%25BE%25E7%2589%2587%25E4%25B8%258B%25E8%25BD%25BD%25E5%259C%25B0/image-20220624184004268.png" alt="image-20220624184004268" style="zoom:50%;" />

那么，我们让hugo生成的web文件与GitHub Pages提取文件的路径相同，就能达到我们需要的**永久挂载**

上面设置`/docs`的路径，就是Github Pages的提取路径，下一步就是改变hugo的默认生成路径即可。

![image-20220624184220428](../../../../Typora%25E5%259B%25BE%25E7%2589%2587%25E4%25B8%258B%25E8%25BD%25BD%25E5%259C%25B0/image-20220624184220428.png)

这里就使用到了`publishDir`，只要将其设置成其他的文件夹名，所有web的文件就会被导入进去。这里我设置的是docs，其他的可不可行没试过。

<img src="../../../../Typora%25E5%259B%25BE%25E7%2589%2587%25E4%25B8%258B%25E8%25BD%25BD%25E5%259C%25B0/image-20220624184338421.png" alt="image-20220624184338421" style="zoom:67%;" />可以看到 docs与public的内容几乎是一样的。同时，我们直接进入挂载的网页：https:\\username.github.io（这个是实例，不是真实的域名），就能看到我们自己搭建的博客了。<img src="../../../../Typora%25E5%259B%25BE%25E7%2589%2587%25E4%25B8%258B%25E8%25BD%25BD%25E5%259C%25B0/image-20220624184501009.png" alt="image-20220624184501009" style="zoom:50%;" />

## day2 

### 域名自定义(DNS域名系统)

以我的博客域名为例

> https://cdubyun.github.io
>
> 看上去跟平常的网址名不一样欸：具体到https://www.baidu.com (当然这两个网站的前缀https://可以不需要输的)

另外，我还觉得现在的域名太丑了，我想自定义一个新的出来，当有这种想法在你搭博客时产生了，其实是件好事。一双无形的大手把你推向了域名注册。我是从[腾讯云](https://console.cloud.tencent.com/domain)注册来的，其他的阿里云还有国外的这些都可以。

在域名注册的时候，有免费注册的也有需要花钱的，具体要根据**顶级域**

![image-20220626210924132](D:/Typora%E5%9B%BE%E7%89%87%E4%B8%8B%E8%BD%BD%E5%9C%B0/image-20220626210924132.png)

域名的等级依次类推。在注册的时候会从**十分直观**的角度发现顶级域之间的不同(com,work,cn,net...)

经过扫描二维码(可能)后，我们的域名就注册成功了！![image-20220626211323859](D:/Typora%E5%9B%BE%E7%89%87%E4%B8%8B%E8%BD%BD%E5%9C%B0/image-20220626211323859.png)

现在，我们让全世界都知道*wzskqjh.com*是我的域名了，但我还不能使用它，如果直接在浏览器里面是打不开的。现在它就像一个贴纸，我们还没有使用它。(它需要立刻同化一个单位，为了虫群)

![image-20220626212427994](D:/Typora%E5%9B%BE%E7%89%87%E4%B8%8B%E8%BD%BD%E5%9C%B0/image-20220626212427994.png)而它要贴的对象，就是我们的博客*cdubyun.github.io*，剩下的就是域名解析了。

域名解析我个人理解也很简单，实际上跟windows的快捷方式、linux的软链接、c语言的指针有十分相似的地方，

这里来说一下快捷方式：

<img src="D:/Typora%E5%9B%BE%E7%89%87%E4%B8%8B%E8%BD%BD%E5%9C%B0/image-20220626215634958.png" alt="image-20220626215634958" style="zoom: 67%;" />

文件夹notebook带有"-快捷方式"的后缀，当我们点击它时，打开的文件夹是它的主体。这两者本质的区别就在于：

windows桌面的应用都会在C:\User\Desktop中，而notebook这个文件夹我们虽然从桌面点击进去，但是本体却在D:\notebook.

<img src="D:/Typora%E5%9B%BE%E7%89%87%E4%B8%8B%E8%BD%BD%E5%9C%B0/image-20220626215745157.png" alt="image-20220626215745157" style="zoom:67%;" />

之后我修改一下快捷方式的文件夹的名字，点进去依然还是D:\notebook

![image-20220626215957422](D:/Typora%E5%9B%BE%E7%89%87%E4%B8%8B%E8%BD%BD%E5%9C%B0/image-20220626215957422.png)

从这里能理解到，其实快捷方式是一个指向原有地址或者说创建了快捷方式的那个文件或者文件夹的真实绝对路径，在计算机里，每一个文件都会有物理地址、DOS地址，而被分配到一个个磁盘一个个文件下，就组成了他们不同的DOS地址。快捷方式就是通过文件管理系统精准的依靠DOS地址，找到它的本体。

tips: [windows DOS地址](https://docs.microsoft.com/zh-cn/dotnet/standard/io/file-path-formats)

OK!比较简易的了解到windows的快捷方式以后，类比一下到DNS就十分轻松了(或许到这里就已经明白)。

在注册完成以后，将刚刚注册的域名与我们GitHub的域名“合体”。

腾讯云这里有直接输入域名解析的情况

<img src="../../../../Typora%25E5%259B%25BE%25E7%2589%2587%25E4%25B8%258B%25E8%25BD%25BD%25E5%259C%25B0/image-20220628232539022.png" alt="image-20220628232539022" style="zoom:67%;" />

还有的域名网站需要你提供IP地址，就在终端上ping一下自己的网站就可以了，如：

![image-20220628232647935](../../../../Typora%25E5%259B%25BE%25E7%2589%2587%25E4%25B8%258B%25E8%25BD%25BD%25E5%259C%25B0/image-20220628232647935.png)

然后把它放在记录值那就好了。注意这里需要对应起来，比如：这里仅需要提供域名，而不是IP地址，看清楚需要你提供网站的什么信息。

以我的Hugo搭建博客为例，在我想利用DNS修改域名时还需要两步操作：

- 在Hugo的文件夹中创建一个名为**CNAME**，必须是大写且没有后缀，里面的内容就是**注册的域名**
- 在Github Pages里，有一个**Custom domain**，同样需要把注册的域名输上去。

使用了域名解析以后，用一个简单的单向图来说：

- 在浏览器中输入注册到的域名 -> 该域名指向**记录值**的域名然后由**记录值的域名提供IP地址**

![image-20220628233245945](../../../../Typora%25E5%259B%25BE%25E7%2589%2587%25E4%25B8%258B%25E8%25BD%25BD%25E5%259C%25B0/image-20220628233245945.png)至此，DNS的内容大致就结束了。

## day3

### 关于博客推送时，git的使用



### GitHub上的图片保存路径



------

day4 标签分类与文件夹的关系

day5 
